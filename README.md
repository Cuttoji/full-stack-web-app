# Task & Resource Management System

à¸£à¸°à¸šà¸šà¸ˆà¸±à¸”à¸à¸²à¸£à¸‡à¸²à¸™à¹à¸¥à¸°à¸—à¸£à¸±à¸à¸¢à¸²à¸à¸£ (Task & Resource Management) à¸ªà¸³à¸«à¸£à¸±à¸šà¸­à¸‡à¸„à¹Œà¸à¸£à¸—à¸µà¹ˆà¸¡à¸µà¸«à¸¥à¸²à¸¢à¹à¸œà¸™à¸à¹à¸¥à¸°à¸«à¸¥à¸²à¸¢à¸šà¸—à¸šà¸²à¸—

[![Tests](https://img.shields.io/badge/tests-139%20passing-brightgreen)](https://github.com)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.0-blue)](https://www.typescriptlang.org/)
[![Next.js](https://img.shields.io/badge/Next.js-16-black)](https://nextjs.org/)

## ğŸŒŸ Features

### Role-Based Access Control
- **ADMIN** - à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥à¸£à¸°à¸šà¸š: à¸ˆà¸±à¸”à¸à¸²à¸£à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰, à¸”à¸¹à¸£à¸²à¸¢à¸‡à¸²à¸™à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
- **FINANCE** - à¸à¸²à¸£à¹€à¸‡à¸´à¸™: à¸”à¸¹à¸£à¸²à¸¢à¸‡à¸²à¸™, à¸ˆà¸±à¸”à¸à¸²à¸£à¸‡à¸šà¸›à¸£à¸°à¸¡à¸²à¸“
- **SALES** - à¸à¹ˆà¸²à¸¢à¸‚à¸²à¸¢: à¸ªà¸£à¹‰à¸²à¸‡à¸‡à¸²à¸™, à¸”à¸¹à¸£à¸²à¸¢à¸‡à¸²à¸™
- **HEAD_TECH** - à¸«à¸±à¸§à¸«à¸™à¹‰à¸²à¹à¸œà¸™à¸à¸Šà¹ˆà¸²à¸‡: à¸ˆà¸±à¸”à¸à¸²à¸£à¸£à¸–, à¸¡à¸­à¸šà¸«à¸¡à¸²à¸¢à¸‡à¸²à¸™, à¸”à¸¹à¸‡à¸²à¸™à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
- **LEADER** - à¸«à¸±à¸§à¸«à¸™à¹‰à¸²à¸—à¸µà¸¡: à¸¡à¸­à¸šà¸«à¸¡à¸²à¸¢à¸‡à¸²à¸™, à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´à¹ƒà¸šà¸¥à¸²
- **TECH** - à¸Šà¹ˆà¸²à¸‡: à¸£à¸±à¸šà¸‡à¸²à¸™, à¸­à¸±à¸›à¹€à¸”à¸•à¸ªà¸–à¸²à¸™à¸°, à¸šà¸±à¸™à¸—à¸¶à¸à¸«à¸¥à¸±à¸à¸à¸²à¸™

### Task Management
- à¸ªà¸£à¹‰à¸²à¸‡/à¹à¸à¹‰à¹„à¸‚/à¸¥à¸šà¸‡à¸²à¸™
- à¸ªà¸–à¸²à¸™à¸°à¸‡à¸²à¸™: à¸£à¸­à¸£à¸±à¸šà¸‡à¸²à¸™ â†’ à¸à¸³à¸¥à¸±à¸‡à¸—à¸³ â†’ à¸ˆà¸šà¸‡à¸²à¸™ / à¸¢à¸à¹€à¸¥à¸´à¸
- à¸¡à¸­à¸šà¸«à¸¡à¸²à¸¢à¸Šà¹ˆà¸²à¸‡à¸«à¸¥à¸²à¸¢à¸„à¸™à¸•à¹ˆà¸­à¸‡à¸²à¸™
- à¸ˆà¸±à¸”à¸à¸²à¸£à¸£à¸–à¸›à¸£à¸°à¸ˆà¸³à¸‡à¸²à¸™
- à¸­à¸±à¸›à¹‚à¸«à¸¥à¸”à¸£à¸¹à¸›à¸«à¸¥à¸±à¸à¸à¸²à¸™à¸à¹ˆà¸­à¸™/à¸«à¸¥à¸±à¸‡à¸—à¸³à¸‡à¸²à¸™
- à¸Ÿà¸­à¸£à¹Œà¸¡à¸šà¸±à¸™à¸—à¸¶à¸à¸‹à¹ˆà¸­à¸¡à¸›à¸£à¸´à¹‰à¸™à¹€à¸•à¸­à¸£à¹Œ (à¸ªà¸³à¸«à¸£à¸±à¸šà¸à¸¥à¸¸à¹ˆà¸¡à¸›à¸£à¸´à¹‰à¸™à¹€à¸•à¸­à¸£à¹Œ)
- à¸‡à¸²à¸™à¸§à¸™à¸‹à¹‰à¸³ (à¸£à¸²à¸¢à¸§à¸±à¸™/à¸£à¸²à¸¢à¸ªà¸±à¸›à¸”à¸²à¸«à¹Œ/à¸£à¸²à¸¢à¹€à¸”à¸·à¸­à¸™)

### Leave Management
- à¸‚à¸­à¸¥à¸² (à¸¥à¸²à¸›à¹ˆà¸§à¸¢, à¸¥à¸²à¸à¸´à¸ˆ, à¸¥à¸²à¸à¸±à¸à¸£à¹‰à¸­à¸™)
- à¸«à¸±à¸§à¸«à¸™à¹‰à¸²à¸—à¸µà¸¡à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´/à¸›à¸à¸´à¹€à¸ªà¸˜à¹ƒà¸šà¸¥à¸²
- à¸•à¸´à¸”à¸•à¸²à¸¡à¹‚à¸„à¸§à¸•à¸²à¸§à¸±à¸™à¸¥à¸²

### Calendar View
- à¸”à¸¹à¸‡à¸²à¸™à¹ƒà¸™à¸£à¸¹à¸›à¹à¸šà¸šà¸›à¸à¸´à¸—à¸´à¸™
- à¸à¸£à¸­à¸‡à¸•à¸²à¸¡à¸à¸¥à¸¸à¹ˆà¸¡à¸‡à¸²à¸™

### Fleet Management
- à¸ˆà¸±à¸”à¸à¸²à¸£à¸£à¸– (à¹€à¸à¸´à¹ˆà¸¡/à¹à¸à¹‰à¹„à¸‚/à¸¥à¸š)
- à¸•à¸´à¸”à¸•à¸²à¸¡à¸ªà¸–à¸²à¸™à¸°à¸£à¸– (à¸§à¹ˆà¸²à¸‡/à¹ƒà¸Šà¹‰à¸‡à¸²à¸™/à¸‹à¹ˆà¸­à¸¡à¸šà¸³à¸£à¸¸à¸‡)
- à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸„à¸§à¸²à¸¡à¸‚à¸±à¸”à¹à¸¢à¹‰à¸‡à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸£à¸–

### Offline Support
- à¸—à¸³à¸‡à¸²à¸™à¹„à¸”à¹‰à¹à¸¡à¹‰à¹„à¸¡à¹ˆà¸¡à¸µà¸­à¸´à¸™à¹€à¸—à¸­à¸£à¹Œà¹€à¸™à¹‡à¸•
- à¸‹à¸´à¸‡à¸„à¹Œà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´à¹€à¸¡à¸·à¹ˆà¸­à¸­à¸­à¸™à¹„à¸¥à¸™à¹Œ

## ğŸ› ï¸ Tech Stack

- **Framework**: Next.js 16 (App Router)
- **Language**: TypeScript
- **Styling**: Tailwind CSS 4
- **Database**: PostgreSQL with Prisma ORM
- **State Management**: React Context + TanStack Query
- **Authentication**: JWT (jsonwebtoken + bcryptjs)
- **Validation**: Zod
- **Date Handling**: date-fns
- **Testing**: Vitest + Playwright
- **Icons**: Lucide React

## ğŸ“¦ Installation

### Prerequisites
- Node.js 18+
- PostgreSQL 14+ (or use Docker)
- Docker (optional, for database)

### Quick Start with Docker

1. **Clone the repository**
```bash
git clone <repository-url>
cd full-stack-web-app
```

2. **Setup environment**
```bash
cp .env.example .env
# Edit .env with your secrets
```

3. **Start database with Docker**
```bash
docker-compose up -d
```

4. **Install dependencies & setup**
```bash
npm install
npm run db:generate
npm run db:migrate
npm run db:seed  # Optional: seed initial data
```

5. **Start development server**
```bash
npm run dev
```

### Manual Database Setup

## ğŸ“ Project Structure

```
â”œâ”€â”€ app/                    # Next.js App Router pages
â”‚   â”œâ”€â”€ api/               # API Routes
â”‚   â”‚   â”œâ”€â”€ auth/          # Authentication endpoints
â”‚   â”‚   â”œâ”€â”€ cars/          # Car management
â”‚   â”‚   â”œâ”€â”€ leaves/        # Leave management
â”‚   â”‚   â”œâ”€â”€ tasks/         # Task management
â”‚   â”‚   â””â”€â”€ users/         # User management
â”‚   â”œâ”€â”€ calendar/          # Calendar page
â”‚   â”œâ”€â”€ cars/              # Cars page
â”‚   â”œâ”€â”€ dashboard/         # Dashboard page
â”‚   â”œâ”€â”€ leaves/            # Leaves page
â”‚   â”œâ”€â”€ login/             # Login page
â”‚   â”œâ”€â”€ notifications/     # Notifications page
â”‚   â”œâ”€â”€ settings/          # Settings page
â”‚   â”œâ”€â”€ tasks/             # Tasks pages
â”‚   â””â”€â”€ users/             # Users page
â”œâ”€â”€ components/            # React components
â”‚   â”œâ”€â”€ layout/            # Layout components
â”‚   â”œâ”€â”€ tasks/             # Task-related components
â”‚   â””â”€â”€ ui/                # UI components
â”œâ”€â”€ contexts/              # React Context providers
â”œâ”€â”€ lib/                   # Utility functions & types
â”œâ”€â”€ prisma/                # Prisma schema & migrations
â””â”€â”€ public/                # Static files
```

## ğŸ”‘ API Endpoints

### Authentication
- `POST /api/auth/login` - Login
- `GET /api/auth/me` - Get current user

### Tasks
- `GET /api/tasks` - List tasks (with pagination & filters)
- `POST /api/tasks` - Create task
- `GET /api/tasks/:id` - Get task details
- `PATCH /api/tasks/:id` - Update task
- `DELETE /api/tasks/:id` - Delete task
- `POST /api/tasks/:id/assign` - Assign technicians

### Leaves
- `GET /api/leaves` - List leaves
- `POST /api/leaves` - Create leave request
- `PATCH /api/leaves/:id` - Update leave (approve/reject)

### Cars
- `GET /api/cars` - List cars
- `POST /api/cars` - Create car
- `PATCH /api/cars/:id` - Update car
- `DELETE /api/cars/:id` - Delete car

### Users
- `GET /api/users` - List users
- `POST /api/users` - Create user
- `PATCH /api/users/:id` - Update user
- `DELETE /api/users/:id` - Delete user

## ğŸŒ Departments & Sub-Units

### Departments
1. **à¸à¹ˆà¸²à¸¢à¸‚à¸²à¸¢ (Sales)**
2. **à¸à¸²à¸£à¹€à¸‡à¸´à¸™ (Finance)**
3. **à¹à¸œà¸™à¸à¸Šà¹ˆà¸²à¸‡ (Tech)** - à¸¡à¸µ 3 à¸à¸¥à¸¸à¹ˆà¸¡à¸¢à¹ˆà¸­à¸¢:
   - à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¹€à¸Šà¹ˆà¸² (Rental)
   - à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡ (Installation)
   - à¸›à¸£à¸´à¹‰à¸™à¹€à¸•à¸­à¸£à¹Œ (Printer)

## ğŸ“ License

MIT License

## ğŸ‘¥ Contributors

- Your Name

## ğŸ“š Documentation

- [API Documentation](docs/API.md)
- [Architecture Guide](docs/ARCHITECTURE.md)

## ğŸ§ª Testing

The project includes comprehensive test coverage with both unit and integration tests.

**Current Test Status**: âœ… All 139 tests passing

```bash
# Run unit tests
npm test

# Run tests in watch mode
npm run test:watch

# Run E2E tests (requires dev server)
npm run test:e2e

# Run E2E tests with UI
npm run test:e2e:ui
```

### Test Coverage
- **Unit Tests**: 129 tests covering utility functions, API responses, authentication, and middleware
- **Integration Tests**: 10 tests covering API endpoints and authentication flows
- **E2E Tests**: Playwright tests for critical user flows

**Recent Optimizations (January 2026)**:
- âœ… Fixed TypeScript type errors in test files
- âœ… Removed unused imports and dependencies
- âœ… Optimized Notifications API Zod validation
- âœ… All 7 test suites passing successfully

## ğŸš€ Scripts

| Script | Description |
|--------|-------------|
| `npm run dev` | Start development server (port 3000) |
| `npm run build` | Build for production |
| `npm start` | Start production server |
| `npm test` | Run unit tests (Vitest) |
| `npm run test:watch` | Run tests in watch mode |
| `npm run test:e2e` | Run E2E tests (Playwright) |
| `npm run test:e2e:ui` | Run E2E tests with UI |
| `npm run db:generate` | Generate Prisma client |
| `npm run db:migrate` | Run database migrations |
| `npm run db:seed` | Seed database with sample data |
| `npm run db:studio` | Open Prisma Studio |
| `npm run lint` | Run ESLint |
| `npm run storybook` | Start Storybook |

## ğŸ“Š Project Status

- âœ… **Build**: Production build successful
- âœ… **Tests**: 139/139 passing (100%)
- âœ… **TypeScript**: No type errors
- âœ… **Linting**: Clean code, no ESLint errors
- ğŸš€ **Ready for deployment**

---